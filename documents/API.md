# Описание методов API

## Оглавление
1. [User.php](#1-User.php)
    * 1.1 [Метод login](#11-Метод-login)
    * 1.2 [Метод logout](#12-Метод-logout)
2. [Application.php](#2-Application.php)
    * 2.1 [Функция checkParams](#21-Функция-checkParams)
    * 2.2 [Метод login](#22-Метод-login)
    * 2.3 [Метод logout](#23-Метод-logout)
    * 2.4 [Метод signUp](#24-Метод-signup)
    * 2.5 [Метод getMessages](#25-Метод-getMessage)
    * 2.6 [Метод sendMessage](#26-Метод-sendMessage)
    * 2.7 [Метод getScene](#27-Метод-getScene)
    * 2.8 [Метод move ](#28-Метод-move)
3. [index.php](#3-index.php)
    * 3.1 [Функция result](#31-Функция-result)


## Домен
```http://studfront```

## Структуры данных
### Корректный ответ Correct
```
{
    result: 'ok',
    data: Data
}
```
### Ответ с ошибкой Error
```
{
    result: 'error',
    error: ErrorDetail
}
```
### ErrorDetail
```
{
    code: number,
    text: string
}
```
### User
```
{
    id: string,
    name: string,
    token: string
}
```

## 1. User.php


### 1.1. Метод login
### адрес
```/?method=login```
### параметры
|Параметр|Тип данных|Комментарий|
|-|-|-|
|login|string|логин юзера|
|hash|string|md5(md5(login+password)+rnd)|
|rnd|number|случайное целое число|

### Успешный ответ
```
Correct => User
```
### Ошибки
```
ErrorDetail = { code: 1001, text: 'Недостаточно параметров' } если переданы не все параметры
ErrorDetail = { code: 456, text: 'Неверный логин или пароль' } ошибка авторизации
```

### 1.2. Метод logout
### адрес
```/?method=logout```
### параметры
|Параметр|Тип данных|Комментарий|
|-|-|-|
|token|string|авторизационный токен юзера|

### Успешный ответ
```
Correct => true
```
### Ошибки
```
ErrorDetail = { code: 400, text: 'Токен не найден' } если токен не передан
```


## 2. Application.php

### 2.1. Функция checkParams
### параметры
|Параметр|Тип данных|Комментарий|
|-|-|-|
|любой|различный|переменное количество аргументов|

### Успешный ответ
```
Correct => true
```
### Ошибки
```
ErrorDetail = { code: 1001, text: 'Недостаточно параметров' } если параметры не переданы
ErrorDetail = { code: 598, text: 'Аргументы переданы неправильно' } не верно передан аргумент
```

### 2.2. Метод login
### параметры
|Параметр|Тип данных|Комментарий|
|-|-|-|
|params|string|параметр пришедший по ссылке|

### Успешный ответ
```
Correct => true
```
### Ошибки
```
ErrorDetail = { code: 1001, text: 'Недостаточно параметров' } если недостаёт параметров
```

### 2.3. Метод logout
### параметры
|Параметр|Тип данных|Комментарий|
|-|-|-|
|token|string|авторизационный токен|

### Успешный ответ
```
Correct => User
```
### Ошибки
```
ErrorDetail = { code: 400, text: 'Токен не найден' } если токен не передан
```

### 2.4. Метод signUp
### параметры
|Параметр|Тип данных|Комментарий|
|-|-|-|
|login   |string|логин пользователя|
|password|string|пароль пользователя|
|nickname|string|никнейм пользователя|
|verifyPassword |string|подтверждение пароля|

### Успешный ответ
```
Correct => true
```
### Ошибки
```
ErrorDetail = { code: 1501, text: 'Введите пароль и подтверждение пароля' } если не введены данные в строках пароль и подтверждение пароля
ErrorDetail = { code: 1001, text: 'Недостаточно параметров' } если недостаёт параметров
```
## 2.5. Метод getMessages
### параметры
|Параметр|Тип данных|Комментарий|
|-|-|-|
|token |string |Аутентификационный токен |
|hash |string |md5(md5(login+password)+rnd) |

### Успешный ответ
```
Correct => true
```
### Ошибки
```
ErrorDetail = { code: 455, text: 'Пользователь не авторизован' } если пользователь не авторизовался
ErrorDetail = { code: 1001, text: 'Недостаточно параметров' } если недостаёт параметров
```
## 2.6. Метод sendMessages
### параметры
|Параметр|Тип данных|Комментарий|
|-|-|-|
|token |string |Аутентификационный токен |
|message |string |текст сообщения |

### Успешный ответ
```
Correct => true
```
### Ошибки
```
ErrorDetail = { code: 455, text: 'Пользователь не авторизован' } если пользователь не авторизовался
ErrorDetail = { code: 1001, text: 'Недостаточно параметров' } если недостаёт параметров

```
## 2.7. Метод getScene
### параметры
|Параметр|Тип данных|Комментарий|
|-|-|-|
|token |string |Аутентификационный токен |
|hashGamers |string |md5(md5(login+password)+rnd) |

### Успешный ответ
```
Correct => true
```
### Ошибки
```
ErrorDetail = { code: 9000, text: 'Неопределенная ошибка'} ошибка не определена.
```
## 2.8. Метод move
### параметры
|Параметр|Тип данных|Комментарий|
|-|-|-|
|token |string |Аутентификационный токен |
|direction |string |направление движения |
|x |string |координаты на плоскости |
|y |string |координаты на плоскости |

### Успешный ответ
```
Correct => true
```
### Ошибки
```
ErrorDetail = { code: 9000, text: 'Неопределенная ошибка' } ошибка не определена

```


## 3. index.php

### 3.1. Функция result

### параметры
|Параметр|Тип данных|Комментарий|
|-|-|-|
|params|string|параметр пришедший по ссылке|

### Успешный ответ
```
Correct => login
Correct => logout
```
### Ошибки
```
ErrorDetail = { code: 466, text: 'method not found' }  если метод не найден
ErrorDetail = { code: 469, text: 'param method not setted' } если параметры не определены

```
